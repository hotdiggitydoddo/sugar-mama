var Mailbot = require('./index.js');

// -------- Receiver Options -------- 

var person1 = {
    email: "peak@sample.com",
    customKey1: "Apple",
    customKey2: "good",
    customKey3: "Peak"
}

var person2 = {
    email: "peter@sample.com",
    customKey1: "Orange",
    customKey2: "bad",
    customKey3: "Peter"
}

// -------- Mail Template -------- 

var smartMail = {
    to: [person1,person2],
    from: "%customKey1 <example@sample.com>", 
    subject: "A %customKey2 news from %customKey1", // A good/bad news from Apple/Orange
    text: "Hi %customKey3!\nThis is just a test, do not reply."
};


// -------- Sending -------- 

var myBot = Mailbot.newBot("SMTP",{
        service: "Gmail",
        auth: {
            user: "example@sample.com",
            pass: "YourPassword"
        }
    });

myBot.send(smartMail,function(err,res){
    if(err)
        console.log("ERROR: "+ err);
    else
        console.log("OK: "+ res.message);

    // Close
    myBot.kill();
});